(()=>{var e={};e.id=550,e.ids=[550],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6199:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var a=s(482),r=s(9108),l=s(2563),i=s.n(l),o=s(8300),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(t,n);let d=["",{children:["perfil",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,919)),"/workspaces/xy-cursos/src/app/perfil/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1342)),"/workspaces/xy-cursos/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/workspaces/xy-cursos/src/app/perfil/page.tsx"],x="/perfil/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/perfil/page",pathname:"/perfil",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8821:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},7456:()=>{},4322:(e,t,s)=>{Promise.resolve().then(s.bind(s,3688))},9224:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(3729),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let s=(0,a.forwardRef)(({color:s="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:n,className:d="",children:c,...x},u)=>(0,a.createElement)("svg",{ref:u,...r,width:i,height:i,stroke:s,strokeWidth:n?24*Number(o)/Number(i):o,className:["lucide",`lucide-${l(e)}`,d].join(" "),...x},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s}},3024:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5187:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},340:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},3211:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},5794:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},7060:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4602:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]])},1498:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},6755:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},5904:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},782:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},8822:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4513:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9200:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},2254:(e,t,s)=>{e.exports=s(4767)},3688:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>M});var a=s(2295),r=s(3729),l=s(2254),i=s(783),o=s.n(i),n=s(7435),d=s(3024),c=s(8822),x=s(1498),u=s(4513),m=s(9224);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let p=(0,m.Z)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),h=(0,m.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var g=s(5794),b=s(340),f=s(7060),y=s(5904),v=s(9200),j=s(5187),N=s(4602),w=s(782),_=s(6755),k=s(3211),q=s(6256),Z=s(3087);function M(){var e;let t=(0,l.useRouter)(),s=(0,n.createClientComponentClient)(),[i,m]=(0,r.useState)(!0),[M,S]=(0,r.useState)(!1),[P,C]=(0,r.useState)(!1),[A,E]=(0,r.useState)(""),[I,D]=(0,r.useState)(""),[L,O]=(0,r.useState)(""),[T,$]=(0,r.useState)(null),[z,H]=(0,r.useState)([]),[R,U]=(0,r.useState)({desbloqueadas:0,total:0}),[V,X]=(0,r.useState)("");(0,r.useEffect)(()=>{(async function(){let{data:{user:e}}=await s.auth.getUser();if(!e){t.push("/login");return}let a=e.user_metadata?.nome||e.email?.split("@")[0]||"Estudante";E(a),O(a),D(e.email||""),X(e.created_at);let r=await (0,q.vc)(s,e.id);r&&$(r);let{data:l}=await s.from("xp_historico").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(10);l&&H(l);let i=await (0,Z.Z)(s,e.id);U({desbloqueadas:i.filter(e=>e.desbloqueada).length,total:i.length}),m(!1)})()},[s,t]);let Q=async()=>{if(!L.trim())return;S(!0);let{error:e}=await s.auth.updateUser({data:{nome:L.trim()}});e||(E(L.trim()),C(!1)),S(!1)},B=T?(0,q.IO)(T.xp_total):null,F=T&&T.questoes_respondidas>0?Math.round(T.questoes_corretas/T.questoes_respondidas*100):0,G=e=>new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"});return i?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"w-12 h-12 border-4 border-violet-500/30 border-t-violet-500 rounded-full animate-spin"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("header",{className:`bg-gradient-to-r ${(e=B?.nivel||1)>=9?"from-yellow-400 to-amber-500":e>=7?"from-orange-400 to-red-500":e>=5?"from-purple-400 to-pink-500":e>=3?"from-blue-400 to-indigo-500":"from-emerald-400 to-teal-500"} text-white`,children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(o(),{href:"/dashboard",className:"p-2 hover:bg-white/10 rounded-lg",children:a.jsx(d.Z,{className:"w-6 h-6"})}),a.jsx("h1",{className:"text-xl font-bold",children:"Meu Perfil"})]}),(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-2xl flex items-center justify-center",children:a.jsx(c.Z,{className:"w-10 h-10"})}),(0,a.jsxs)("div",{className:"flex-1",children:[P?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:L,onChange:e=>O(e.target.value),className:"bg-white/20 border border-white/30 rounded-lg px-3 py-2 text-white placeholder-white/50 focus:outline-none focus:border-white",placeholder:"Seu nome",autoFocus:!0}),a.jsx("button",{onClick:Q,disabled:M,className:"p-2 bg-white/20 rounded-lg hover:bg-white/30",children:a.jsx(x.Z,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{O(A),C(!1)},className:"p-2 bg-white/20 rounded-lg hover:bg-white/30",children:a.jsx(u.Z,{className:"w-5 h-5"})})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"text-2xl font-black",children:A}),a.jsx("button",{onClick:()=>C(!0),className:"p-1.5 hover:bg-white/10 rounded-lg",children:a.jsx(p,{className:"w-4 h-4"})})]}),(0,a.jsxs)("p",{className:"text-white/80 text-sm flex items-center gap-1 mt-1",children:[a.jsx(h,{className:"w-4 h-4"}),I]}),(0,a.jsxs)("p",{className:"text-white/60 text-xs flex items-center gap-1 mt-1",children:[a.jsx(g.Z,{className:"w-3 h-3"}),"Membro desde ",new Date(V).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"})]})]})]}),B&&(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white/10 rounded-xl p-3 text-center",children:[a.jsx("p",{className:"text-2xl font-black",children:B.nivel}),a.jsx("p",{className:"text-white/70 text-xs",children:"N\xedvel"})]}),(0,a.jsxs)("div",{className:"bg-white/10 rounded-xl p-3 text-center",children:[a.jsx("p",{className:"text-2xl font-black",children:B.xpTotal}),a.jsx("p",{className:"text-white/70 text-xs",children:"XP Total"})]}),(0,a.jsxs)("div",{className:"bg-white/10 rounded-xl p-3 text-center",children:[a.jsx("p",{className:"text-2xl font-black",children:T?.streak_max||0}),a.jsx("p",{className:"text-white/70 text-xs",children:"Maior Streak"})]})]})]})]})}),(0,a.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-5 border border-gray-100",children:[(0,a.jsxs)("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(b.Z,{className:"w-5 h-5 text-blue-500"}),"Estat\xedsticas"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-emerald-50 rounded-xl p-4 text-center",children:[a.jsx(f.Z,{className:"w-6 h-6 text-emerald-500 mx-auto mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:T?.questoes_respondidas||0}),a.jsx("p",{className:"text-emerald-700 text-xs",children:"Quest\xf5es Respondidas"})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[a.jsx(y.Z,{className:"w-6 h-6 text-blue-500 mx-auto mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:T?.questoes_corretas||0}),a.jsx("p",{className:"text-blue-700 text-xs",children:"Acertos"})]}),(0,a.jsxs)("div",{className:"bg-amber-50 rounded-xl p-4 text-center",children:[a.jsx(v.Z,{className:"w-6 h-6 text-amber-500 mx-auto mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-amber-600",children:T?.batalhas_jogadas||0}),a.jsx("p",{className:"text-amber-700 text-xs",children:"Batalhas"})]}),(0,a.jsxs)("div",{className:"bg-purple-50 rounded-xl p-4 text-center",children:[a.jsx(j.Z,{className:"w-6 h-6 text-purple-500 mx-auto mb-2"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:T?.batalhas_perfeitas||0}),a.jsx("p",{className:"text-purple-700 text-xs",children:"Perfeitas"})]})]}),(0,a.jsxs)("div",{className:"mt-4 bg-gray-50 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-gray-700 font-medium",children:"Taxa de Acerto"}),(0,a.jsxs)("span",{className:"font-bold text-gray-900",children:[F,"%"]})]}),a.jsx("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${F>=70?"bg-emerald-500":F>=50?"bg-amber-500":"bg-red-500"}`,style:{width:`${F}%`}})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-5 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(N.Z,{className:"w-5 h-5 text-orange-500"}),a.jsx("h3",{className:"font-bold text-gray-900",children:"Streak"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-4xl font-black text-orange-500",children:T?.streak_atual||0}),a.jsx("p",{className:"text-gray-500 text-sm",children:"dias seguidos"}),(0,a.jsxs)("p",{className:"text-gray-400 text-xs mt-2",children:["Recorde: ",T?.streak_max||0," dias"]})]})]}),(0,a.jsxs)(o(),{href:"/conquistas",className:"bg-white rounded-2xl p-5 border border-gray-100 hover:border-amber-200 transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(w.Z,{className:"w-5 h-5 text-amber-500"}),a.jsx("h3",{className:"font-bold text-gray-900",children:"Conquistas"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-4xl font-black text-amber-500",children:R.desbloqueadas}),(0,a.jsxs)("p",{className:"text-gray-500 text-sm",children:["de ",R.total]}),a.jsx("p",{className:"text-amber-600 text-xs mt-2",children:"Ver todas â†’"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-5 border border-gray-100",children:[(0,a.jsxs)("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(_.Z,{className:"w-5 h-5 text-amber-500"}),"\xdaltimos Ganhos de XP"]}),z.length>0?a.jsx("div",{className:"space-y-2",children:z.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-gray-900 font-medium",children:e.motivo}),a.jsx("p",{className:"text-gray-400 text-xs",children:G(e.created_at)})]}),(0,a.jsxs)("span",{className:"text-emerald-600 font-bold",children:["+",e.xp_ganho," XP"]})]},e.id))}):a.jsx("p",{className:"text-gray-400 text-center py-4",children:"Nenhum XP ganho ainda"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[a.jsx(o(),{href:"/ranking",className:"block bg-white rounded-2xl p-4 border border-gray-100 hover:border-amber-200 transition-all",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(w.Z,{className:"w-6 h-6 text-amber-500"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Ver Ranking"})]}),a.jsx(d.Z,{className:"w-5 h-5 text-gray-400 rotate-180"})]})}),a.jsx(o(),{href:"/caderno-erros",className:"block bg-white rounded-2xl p-4 border border-gray-100 hover:border-red-200 transition-all",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(k.Z,{className:"w-6 h-6 text-red-500"}),a.jsx("span",{className:"font-medium text-gray-900",children:"Caderno de Erros"})]}),a.jsx(d.Z,{className:"w-5 h-5 text-gray-400 rotate-180"})]})})]})]})]})}},3087:(e,t,s)=>{"use strict";async function a(e,t,s,a=!1){let{data:r}=await e.from("conquistas").select("*").eq("ativo",!0);if(!r)return[];let{data:l}=await e.from("user_conquistas").select("conquista_id").eq("user_id",t),i=new Set(l?.map(e=>e.conquista_id)||[]),o=[];for(let l of r){if(i.has(l.id))continue;let r=!1;switch(l.criterio_tipo){case"questoes_respondidas":r=s.questoes_respondidas>=l.criterio_valor;break;case"questoes_corretas":r=s.questoes_corretas>=l.criterio_valor;break;case"batalhas_jogadas":r=s.batalhas_jogadas>=l.criterio_valor;break;case"batalhas_perfeitas":r=s.batalhas_perfeitas>=l.criterio_valor;break;case"streak_atual":r=s.streak_atual>=l.criterio_valor;break;case"xp_total":r=s.xp_total>=l.criterio_valor;break;case"nivel":r=s.nivel>=l.criterio_valor;break;case"diagnostico_completo":r=a}if(r&&(o.push(l),await e.from("user_conquistas").insert({user_id:t,conquista_id:l.id}),l.xp_bonus>0)){let{data:s}=await e.from("user_stats").select("xp_total").eq("user_id",t).single();s&&await e.from("user_stats").update({xp_total:s.xp_total+l.xp_bonus,updated_at:new Date().toISOString()}).eq("user_id",t)}}return o}async function r(e,t){let{data:s}=await e.from("conquistas").select("*").eq("ativo",!0).order("ordem"),{data:a}=await e.from("user_conquistas").select("conquista_id, desbloqueada_em").eq("user_id",t),r=new Map(a?.map(e=>[e.conquista_id,e.desbloqueada_em])||[]);return(s||[]).map(e=>({...e,desbloqueada:r.has(e.id),desbloqueada_em:r.get(e.id)||null}))}s.d(t,{Z:()=>r,c:()=>a})},6256:(e,t,s)=>{"use strict";s.d(t,{Ae:()=>a,IO:()=>l,qx:()=>n,vc:()=>i});let a=[{nivel:1,xpNecessario:0,titulo:"Iniciante",cor:"gray"},{nivel:2,xpNecessario:100,titulo:"Aprendiz",cor:"green"},{nivel:3,xpNecessario:300,titulo:"Estudante",cor:"blue"},{nivel:4,xpNecessario:600,titulo:"Dedicado",cor:"indigo"},{nivel:5,xpNecessario:1e3,titulo:"Aplicado",cor:"purple"},{nivel:6,xpNecessario:1500,titulo:"Competente",cor:"pink"},{nivel:7,xpNecessario:2200,titulo:"Habilidoso",cor:"orange"},{nivel:8,xpNecessario:3e3,titulo:"Expert",cor:"amber"},{nivel:9,xpNecessario:4e3,titulo:"Mestre",cor:"red"},{nivel:10,xpNecessario:5500,titulo:"Lenda",cor:"yellow"}],r={QUESTAO_FACIL:5,QUESTAO_MEDIA:10,QUESTAO_DIFICIL:15};function l(e){let t=a[0];for(let s of a)if(e>=s.xpNecessario)t=s;else break;let s=a.find(e=>e.nivel===t.nivel+1),r=s?s.xpNecessario-e:0,l=e-t.xpNecessario,i=s?s.xpNecessario-t.xpNecessario:0;return{...t,xpTotal:e,xpParaProximo:r,progressoNivel:i>0?Math.round(l/i*100):100,proximoNivel:s?.titulo||"M\xe1ximo"}}async function i(e,t){let{data:s}=await e.from("user_stats").select("*").eq("user_id",t).single();if(s)return s;let{data:a,error:r}=await e.from("user_stats").insert({user_id:t}).select().single();return r?(console.error("Erro ao criar user_stats:",r),null):a}async function o(e,t,s,a){let r=await i(e,t);if(!r)return null;let o=r.xp_total+s,n=l(o),d=new Date().toISOString().split("T")[0],c=r.ultimo_estudo,x=r.streak_atual,u=r.streak_max;if(c){let e=new Date;e.setDate(e.getDate()-1),c===e.toISOString().split("T")[0]?x+=1:c!==d&&(x=1)}else x=1;return x>u&&(u=x),await e.from("user_stats").update({xp_total:o,nivel:n.nivel,titulo:n.titulo,streak_atual:x,streak_max:u,ultimo_estudo:d,updated_at:new Date().toISOString()}).eq("user_id",t),await e.from("xp_historico").insert({user_id:t,xp_ganho:s,motivo:a}),{xpGanho:s,xpTotal:o,nivelInfo:n,streak:x,subiuNivel:n.nivel>r.nivel}}async function n(e,t,s,a){let l=await i(e,t);if(!l)return null;let n=0;if(s)switch(a){case"facil":n=r.QUESTAO_FACIL;break;case"dificil":n=r.QUESTAO_DIFICIL;break;default:n=r.QUESTAO_MEDIA}return(await e.from("user_stats").update({questoes_respondidas:l.questoes_respondidas+1,questoes_corretas:s?l.questoes_corretas+1:l.questoes_corretas,updated_at:new Date().toISOString()}).eq("user_id",t),n>0)?await o(e,t,n,`Quest\xe3o ${a} correta`):null}},1342:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l,metadata:()=>r});var a=s(5036);s(5023);let r={title:{default:"XY Cursos | Plataforma Integrada de Estudos",template:"%s | XY Cursos"},description:"Sua aprova\xe7\xe3o come\xe7a aqui e agora.",keywords:["ENEM","Matem\xe1tica","Olimp\xedadas","IFPI","Preparat\xf3rio"],authors:[{name:"XY Cursos"}]};function l({children:e}){return(0,a.jsxs)("html",{lang:"pt-BR",children:[(0,a.jsxs)("head",{children:[a.jsx("script",{dangerouslySetInnerHTML:{__html:`
              window.MathJax = {
                tex: {
                  inlineMath: [['$', '$']],
                  displayMath: [['$$', '$$']],
                },
                svg: {
                  fontCache: 'global'
                }
              };
            `}}),a.jsx("script",{src:"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js",async:!0})]}),a.jsx("body",{className:"antialiased",children:e})]})}},919:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let a=(0,s(6843).createProxy)(String.raw`/workspaces/xy-cursos/src/app/perfil/page.tsx`),{__esModule:r,$$typeof:l}=a,i=a.default},5023:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[73,667,435],()=>s(6199));module.exports=a})();