(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7695:function(e,s,t){Promise.resolve().then(t.bind(t,5566))},5566:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var a=t(7437),l=t(2265),r=t(4033),i=t(1396),d=t.n(i),n=t(3082);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,t(2898).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var x=t(8957),o=t(1016),m=t(3008),h=t(2457),u=t(2369),j=t(2505),g=t(6654),b=t(7158),N=t(9865),p=t(5790),v=t(2245),f=t(6415),w=t(366);function y(){var e;let s=(0,r.useRouter)(),t=(0,n.createClientComponentClient)(),[i,y]=(0,l.useState)(!0),[_,k]=(0,l.useState)(""),[Z,P]=(0,l.useState)(null),[E,q]=(0,l.useState)(null),[C,D]=(0,l.useState)(0);(0,l.useEffect)(()=>{!async function(){var e,a;let{data:{user:l}}=await t.auth.getUser();if(!l){s.push("/login");return}k((null===(e=l.user_metadata)||void 0===e?void 0:e.nome)||(null===(a=l.email)||void 0===a?void 0:a.split("@")[0])||"Estudante");let r=await (0,f.vc)(t,l.id);r&&P(r);let{data:i}=await t.from("diagnostico_resultados").select("nivel, nota_tri, percentual_geral, created_at").eq("user_id",l.id).single();i&&q(i);let{count:d}=await t.from("caderno_erros").select("*",{count:"exact",head:!0}).eq("user_id",l.id).eq("revisado",!1);D(d||0),y(!1)}()},[t,s]);let O=async()=>{await t.auth.signOut(),s.push("/login")},S=Z?(0,f.IO)(Z.xp_total):null,T=Z&&Z.questoes_respondidas>0?Math.round(Z.questoes_corretas/Z.questoes_respondidas*100):0;return i?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-xl font-bold text-gray-900",children:["Ol\xe1, ",_,"! \uD83D\uDC4B"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Continue sua jornada de estudos"})]}),(0,a.jsx)("button",{onClick:O,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,a.jsx)(c,{className:"w-5 h-5"})})]})})}),(0,a.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[S&&(0,a.jsxs)("div",{className:"bg-gradient-to-r ".concat((e=S.nivel)>=9?"from-yellow-400 to-amber-500":e>=7?"from-orange-400 to-red-500":e>=5?"from-purple-400 to-pink-500":e>=3?"from-blue-400 to-indigo-500":"from-emerald-400 to-teal-500"," rounded-3xl p-6 text-white shadow-lg"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-8 h-8"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-white/80 text-sm",children:["N\xedvel ",S.nivel]}),(0,a.jsx)("p",{className:"text-2xl font-black",children:S.titulo})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-3xl font-black",children:S.xpTotal}),(0,a.jsx)("p",{className:"text-white/80 text-sm",children:"XP Total"})]})]}),(0,a.jsxs)("div",{className:"mb-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm text-white/80 mb-1",children:[(0,a.jsxs)("span",{children:["Progresso para ",S.proximoNivel]}),(0,a.jsxs)("span",{children:[S.progressoNivel,"%"]})]}),(0,a.jsx)("div",{className:"h-3 bg-white/20 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-white rounded-full transition-all duration-500",style:{width:"".concat(S.progressoNivel,"%")}})}),S.xpParaProximo>0&&(0,a.jsxs)("p",{className:"text-white/70 text-xs mt-1",children:["Faltam ",S.xpParaProximo," XP"]})]}),Z&&Z.streak_atual>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-4 bg-white/10 rounded-xl px-4 py-2 w-fit",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 text-orange-300"}),(0,a.jsxs)("span",{className:"font-bold",children:[Z.streak_atual," dias"]}),(0,a.jsx)("span",{className:"text-white/70 text-sm",children:"de streak!"})]})]}),(0,a.jsx)(w.Z,{}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5 text-emerald-500"}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Quest\xf5es"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==Z?void 0:Z.questoes_respondidas)||0})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 text-blue-500"}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Taxa"})]}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[T,"%"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(u.Z,{className:"w-5 h-5 text-amber-500"}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Batalhas"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==Z?void 0:Z.batalhas_jogadas)||0})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(j.Z,{className:"w-5 h-5 text-purple-500"}),(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Perfeitas"})]}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==Z?void 0:Z.batalhas_perfeitas)||0})]})]}),E?(0,a.jsx)("div",{className:"bg-white rounded-2xl p-5 border border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-violet-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)(g.Z,{className:"w-6 h-6 text-violet-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-bold text-gray-900",children:["Diagn\xf3stico: ",E.nivel]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Nota TRI: ",E.nota_tri," • ",E.percentual_geral,"% acertos"]})]})]}),(0,a.jsx)(d(),{href:"/diagnostico",className:"text-violet-600 hover:text-violet-700",children:(0,a.jsx)(b.Z,{className:"w-6 h-6"})})]})}):(0,a.jsx)(d(),{href:"/diagnostico",className:"block bg-gradient-to-r from-violet-500 to-purple-500 rounded-2xl p-5 text-white hover:from-violet-600 hover:to-purple-600 transition-all",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,a.jsx)(g.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Fa\xe7a seu Diagn\xf3stico"}),(0,a.jsx)("p",{className:"text-white/80 text-sm",children:"Descubra seu n\xedvel em matem\xe1tica"})]})]}),(0,a.jsx)(b.Z,{className:"w-6 h-6"})]})}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Estudar"}),(0,a.jsx)(d(),{href:"/batalha",className:"block bg-gradient-to-r from-amber-500 to-orange-500 rounded-2xl p-5 text-white hover:from-amber-600 hover:to-orange-600 transition-all",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,a.jsx)(u.Z,{className:"w-6 h-6"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold",children:"Batalha R\xe1pida"}),(0,a.jsx)("p",{className:"text-white/80 text-sm",children:"5 quest\xf5es • 30s cada • +150 XP"})]})]}),(0,a.jsx)(b.Z,{className:"w-6 h-6"})]})}),(0,a.jsx)(d(),{href:"/caderno-erros",className:"block bg-white rounded-2xl p-5 border border-gray-100 hover:border-red-200 hover:bg-red-50/50 transition-all",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)(N.Z,{className:"w-6 h-6 text-red-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-gray-900",children:"Caderno de Erros"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:C>0?"".concat(C," quest\xf5es para revisar"):"Nenhum erro pendente"})]})]}),C>0&&(0,a.jsx)("span",{className:"bg-red-500 text-white text-sm font-bold px-3 py-1 rounded-full",children:C})]})}),(0,a.jsx)(d(),{href:"/plataforma/enem",className:"block bg-white rounded-2xl p-5 border border-gray-100 hover:border-blue-200 hover:bg-blue-50/50 transition-all",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)(p.Z,{className:"w-6 h-6 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-gray-900",children:"M\xf3dulos ENEM"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"Estude por t\xf3picos"})]})]}),(0,a.jsx)(b.Z,{className:"w-6 h-6 text-gray-400"})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-5 border border-gray-100",children:[(0,a.jsxs)("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(v.Z,{className:"w-5 h-5 text-amber-500"}),"N\xedveis e T\xedtulos"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:f.Ae.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-xl text-center ".concat(S&&e.nivel===S.nivel?"bg-amber-100 border-2 border-amber-400":S&&e.nivel<S.nivel?"bg-gray-100":"bg-gray-50 opacity-50"),children:[(0,a.jsx)("p",{className:"text-lg font-bold text-gray-900",children:e.nivel}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.titulo}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:[e.xpNecessario," XP"]})]},e.nivel))})]})]})]})}}},function(e){e.O(0,[250,881,778,971,938,744],function(){return e(e.s=7695)}),_N_E=e.O()}]);