(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{6245:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(2898).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},7972:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(2898).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9042:function(e,s,a){Promise.resolve().then(a.bind(a,7048))},7048:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return E}});var t=a(7437),l=a(2265),r=a(4033),i=a(1396),n=a.n(i),d=a(3082),c=a(7972),o=a(8957),x=a(1016),m=a(7158),u=a(2457),h=a(3008),b=a(2369),j=a(2505),p=a(6654),g=a(9865),f=a(5790),N=a(2245),v=a(6415),w=a(5293),y=a(366);function _(e){let{conquista:s,onClose:a}=e,[r,i]=(0,l.useState)(!1),[n,d]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{setTimeout(()=>i(!0),100);let e=setTimeout(()=>{d(!0),setTimeout(a,500)},4e3);return()=>clearTimeout(e)},[a]),(0,t.jsx)("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-50 transition-all duration-500 ".concat(r&&!n?"opacity-100 translate-y-0":"opacity-0 -translate-y-4"),children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-amber-500 to-yellow-500 rounded-2xl p-1 shadow-2xl",children:(0,t.jsx)("div",{className:"bg-white rounded-xl p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-amber-100 rounded-2xl flex items-center justify-center text-3xl animate-bounce",children:s.icone}),(0,t.jsx)("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-amber-500 rounded-full flex items-center justify-center",children:(0,t.jsx)(o.Z,{className:"w-4 h-4 text-white"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-amber-600 text-sm font-medium",children:"\uD83C\uDF89 Nova Conquista!"}),(0,t.jsx)("p",{className:"text-xl font-black text-gray-900",children:s.titulo}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:s.descricao}),s.xp_bonus>0&&(0,t.jsxs)("p",{className:"text-amber-600 text-sm font-bold mt-1",children:["+",s.xp_bonus," XP"]})]})]})})})})}/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let q=(0,a(2898).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var k=a(2549),Z=a(6245);async function S(e,s){let{data:a}=await e.from("user_metas").select("*").eq("user_id",s).single();if(a)return a;let{data:t,error:l}=await e.from("user_metas").insert({user_id:s,meta_xp_diario:50,meta_questoes_diario:10,meta_ativa:!0}).select().single();return l?(console.error("Erro ao criar meta:",l),null):t}async function D(e,s){let a=new Date().toISOString().split("T")[0],{data:t}=await e.from("progresso_diario").select("*").eq("user_id",s).eq("data",a).single();if(t)return t;let{data:l,error:r}=await e.from("progresso_diario").insert({user_id:s,data:a,xp_ganho:0,questoes_respondidas:0,questoes_corretas:0}).select().single();return r?(console.error("Erro ao criar progresso:",r),null):l}async function C(e,s,a,t){let{error:l}=await e.from("user_metas").update({meta_xp_diario:a,meta_questoes_diario:t,updated_at:new Date().toISOString()}).eq("user_id",s);return!l}function P(){let e=(0,d.createClientComponentClient)(),[s,a]=(0,l.useState)(!0),[r,i]=(0,l.useState)(null),[n,c]=(0,l.useState)(null),[o,m]=(0,l.useState)(!1),[u,b]=(0,l.useState)(50),[j,g]=(0,l.useState)(10),[f,N]=(0,l.useState)(!1);(0,l.useEffect)(()=>{!async function(){let{data:{user:s}}=await e.auth.getUser();if(!s)return;let t=await S(e,s.id),l=await D(e,s.id);t&&(i(t),b(t.meta_xp_diario),g(t.meta_questoes_diario)),l&&c(l),a(!1)}()},[e]);let v=async()=>{let{data:{user:s}}=await e.auth.getUser();s&&(N(!0),await C(e,s.id,u,j)&&(i(e=>e?{...e,meta_xp_diario:u,meta_questoes_diario:j}:null),m(!1)),N(!1))};if(s)return(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-5 border border-gray-100 animate-pulse",children:[(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-100 rounded w-full mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-100 rounded w-2/3"})]});if(!r||!n)return null;let w=Math.min(n.xp_ganho/r.meta_xp_diario*100,100),y=Math.min(n.questoes_respondidas/r.meta_questoes_diario*100,100),_=(n.meta_xp_cumprida?1:0)+(n.meta_questoes_cumprida?1:0),P=2===_;return o?(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-5 border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(q,{className:"w-5 h-5 text-gray-500"}),"Configurar Metas"]}),(0,t.jsx)("button",{onClick:()=>m(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,t.jsx)(k.Z,{className:"w-5 h-5 text-gray-400"})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta de XP Di\xe1rio"}),(0,t.jsxs)("select",{value:u,onChange:e=>b(Number(e.target.value)),className:"w-full border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-violet-500",children:[(0,t.jsx)("option",{value:25,children:"25 XP (F\xe1cil)"}),(0,t.jsx)("option",{value:50,children:"50 XP (Normal)"}),(0,t.jsx)("option",{value:100,children:"100 XP (Desafiador)"}),(0,t.jsx)("option",{value:150,children:"150 XP (Hardcore)"}),(0,t.jsx)("option",{value:200,children:"200 XP (Insano)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta de Quest\xf5es Di\xe1rias"}),(0,t.jsxs)("select",{value:j,onChange:e=>g(Number(e.target.value)),className:"w-full border border-gray-200 rounded-xl px-4 py-3 focus:outline-none focus:ring-2 focus:ring-violet-500",children:[(0,t.jsx)("option",{value:5,children:"5 quest\xf5es (F\xe1cil)"}),(0,t.jsx)("option",{value:10,children:"10 quest\xf5es (Normal)"}),(0,t.jsx)("option",{value:20,children:"20 quest\xf5es (Desafiador)"}),(0,t.jsx)("option",{value:30,children:"30 quest\xf5es (Hardcore)"}),(0,t.jsx)("option",{value:50,children:"50 quest\xf5es (Insano)"})]})]}),(0,t.jsxs)("button",{onClick:v,disabled:f,className:"w-full bg-violet-500 text-white font-bold py-3 rounded-xl hover:bg-violet-600 disabled:opacity-50 flex items-center justify-center gap-2",children:[(0,t.jsx)(Z.Z,{className:"w-5 h-5"}),f?"Salvando...":"Salvar Metas"]})]})]}):(0,t.jsxs)("div",{className:"rounded-2xl p-5 border-2 transition-all ".concat(P?"bg-emerald-50 border-emerald-300":"bg-white border-gray-100"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("h3",{className:"font-bold text-gray-900 flex items-center gap-2",children:[(0,t.jsx)(p.Z,{className:"w-5 h-5 ".concat(P?"text-emerald-500":"text-violet-500")}),"Meta Di\xe1ria",P&&(0,t.jsxs)("span",{className:"bg-emerald-500 text-white text-xs px-2 py-0.5 rounded-full flex items-center gap-1",children:[(0,t.jsx)(h.Z,{className:"w-3 h-3"})," Completa!"]})]}),(0,t.jsx)("button",{onClick:()=>m(!0),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,t.jsx)(q,{className:"w-4 h-4 text-gray-400"})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,t.jsxs)("span",{className:"text-gray-600 flex items-center gap-1",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 text-amber-500"}),"XP do Dia"]}),(0,t.jsxs)("span",{className:"font-bold ".concat(n.meta_xp_cumprida?"text-emerald-600":"text-gray-900"),children:[n.xp_ganho,"/",r.meta_xp_diario,n.meta_xp_cumprida&&(0,t.jsx)(h.Z,{className:"w-4 h-4 inline ml-1 text-emerald-500"})]})]}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ".concat(n.meta_xp_cumprida?"bg-emerald-500":"bg-amber-500"),style:{width:"".concat(w,"%")}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,t.jsxs)("span",{className:"text-gray-600 flex items-center gap-1",children:[(0,t.jsx)(p.Z,{className:"w-4 h-4 text-blue-500"}),"Quest\xf5es do Dia"]}),(0,t.jsxs)("span",{className:"font-bold ".concat(n.meta_questoes_cumprida?"text-emerald-600":"text-gray-900"),children:[n.questoes_respondidas,"/",r.meta_questoes_diario,n.meta_questoes_cumprida&&(0,t.jsx)(h.Z,{className:"w-4 h-4 inline ml-1 text-emerald-500"})]})]}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ".concat(n.meta_questoes_cumprida?"bg-emerald-500":"bg-blue-500"),style:{width:"".concat(y,"%")}})})]})]}),(0,t.jsx)("div",{className:"mt-4 pt-3 border-t border-gray-100",children:P?(0,t.jsx)("p",{className:"text-emerald-600 text-sm font-medium text-center",children:"\uD83C\uDF89 Parab\xe9ns! Voc\xea cumpriu todas as metas de hoje!"}):1===_?(0,t.jsx)("p",{className:"text-amber-600 text-sm text-center",children:"\uD83D\uDCAA Quase l\xe1! Falta s\xf3 uma meta!"}):(0,t.jsx)("p",{className:"text-gray-500 text-sm text-center",children:"\uD83D\uDCDA Continue estudando para bater suas metas!"})})]})}function E(){var e;let s=(0,r.useRouter)(),a=(0,d.createClientComponentClient)(),[i,q]=(0,l.useState)(!0),[k,Z]=(0,l.useState)(""),[S,D]=(0,l.useState)(null),[C,E]=(0,l.useState)(null),[M,T]=(0,l.useState)(0),[X,F]=(0,l.useState)([]),[I,O]=(0,l.useState)({desbloqueadas:0,total:0}),[z,V]=(0,l.useState)([]),[R,A]=(0,l.useState)(null);(0,l.useEffect)(()=>{async function e(e){let{data:s}=await a.from("diagnostico_resultados").select("id").eq("user_id",e).single();return!!s}!async function(){var t,l;let{data:{user:r}}=await a.auth.getUser();if(!r){s.push("/login");return}Z((null===(t=r.user_metadata)||void 0===t?void 0:t.nome)||(null===(l=r.email)||void 0===l?void 0:l.split("@")[0])||"Estudante");let i=await (0,v.vc)(a,r.id);if(i){D(i);let s=await e(r.id),t=await (0,w.c)(a,r.id,i,s);t.length>0&&(V(t),A(t[0]))}let{data:n}=await a.from("diagnostico_resultados").select("nivel, nota_tri, percentual_geral, created_at").eq("user_id",r.id).single();n&&E(n);let{count:d}=await a.from("caderno_erros").select("*",{count:"exact",head:!0}).eq("user_id",r.id).eq("revisado",!1);T(d||0);let c=await (0,w.Z)(a,r.id),o=c.filter(e=>e.desbloqueada);O({desbloqueadas:o.length,total:c.length}),F(o.sort((e,s)=>new Date(s.desbloqueada_em||0).getTime()-new Date(e.desbloqueada_em||0).getTime()).slice(0,3)),q(!1)}()},[a,s]);let H=S?(0,v.IO)(S.xp_total):null,Q=S&&S.questoes_respondidas>0?Math.round(S.questoes_corretas/S.questoes_respondidas*100):0;return i?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[R&&(0,t.jsx)(_,{conquista:R,onClose:()=>{let e=z.slice(1);V(e),A(e[0]||null)}}),(0,t.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-xl font-bold text-gray-900",children:["Ol\xe1, ",k,"! \uD83D\uDC4B"]}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Continue sua jornada de estudos"})]}),(0,t.jsx)(n(),{href:"/perfil",className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,t.jsx)(c.Z,{className:"w-5 h-5"})})]})})}),(0,t.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[H&&(0,t.jsxs)("div",{className:"bg-gradient-to-r ".concat((e=H.nivel)>=9?"from-yellow-400 to-amber-500":e>=7?"from-orange-400 to-red-500":e>=5?"from-purple-400 to-pink-500":e>=3?"from-blue-400 to-indigo-500":"from-emerald-400 to-teal-500"," rounded-3xl p-6 text-white shadow-lg"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:(0,t.jsx)(o.Z,{className:"w-8 h-8"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-white/80 text-sm",children:["N\xedvel ",H.nivel]}),(0,t.jsx)("p",{className:"text-2xl font-black",children:H.titulo})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-3xl font-black",children:H.xpTotal}),(0,t.jsx)("p",{className:"text-white/80 text-sm",children:"XP Total"})]})]}),(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm text-white/80 mb-1",children:[(0,t.jsxs)("span",{children:["Progresso para ",H.proximoNivel]}),(0,t.jsxs)("span",{children:[H.progressoNivel,"%"]})]}),(0,t.jsx)("div",{className:"h-3 bg-white/20 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-white rounded-full transition-all duration-500",style:{width:"".concat(H.progressoNivel,"%")}})}),H.xpParaProximo>0&&(0,t.jsxs)("p",{className:"text-white/70 text-xs mt-1",children:["Faltam ",H.xpParaProximo," XP"]})]}),S&&S.streak_atual>0&&(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-4 bg-white/10 rounded-xl px-4 py-2 w-fit",children:[(0,t.jsx)(x.Z,{className:"w-5 h-5 text-orange-300"}),(0,t.jsxs)("span",{className:"font-bold",children:[S.streak_atual," dias"]}),(0,t.jsx)("span",{className:"text-white/70 text-sm",children:"de streak!"})]})]}),(0,t.jsx)(P,{}),(0,t.jsx)(y.Z,{}),(0,t.jsxs)(n(),{href:"/conquistas",className:"block bg-white rounded-2xl p-5 border border-gray-100 hover:border-amber-200 transition-all",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Z,{className:"w-5 h-5 text-amber-500"}),(0,t.jsx)("h3",{className:"font-bold text-gray-900",children:"Conquistas"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[I.desbloqueadas,"/",I.total]}),(0,t.jsx)(m.Z,{className:"w-5 h-5 text-gray-400"})]})]}),X.length>0?(0,t.jsxs)("div",{className:"flex gap-3",children:[X.map(e=>(0,t.jsx)("div",{className:"w-14 h-14 bg-amber-100 rounded-2xl flex items-center justify-center text-2xl",title:e.titulo,children:e.icone},e.id)),I.desbloqueadas>3&&(0,t.jsxs)("div",{className:"w-14 h-14 bg-gray-100 rounded-2xl flex items-center justify-center text-sm text-gray-500 font-bold",children:["+",I.desbloqueadas-3]})]}):(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"Nenhuma conquista ainda. Continue estudando!"})]}),(0,t.jsx)(n(),{href:"/relatorio",className:"block bg-white rounded-2xl p-4 border border-gray-100 hover:border-blue-200 transition-all",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,t.jsx)(u.Z,{className:"w-6 h-6 text-blue-500"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-gray-900",children:"Relat\xf3rio Semanal"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Veja seu desempenho"})]})]}),(0,t.jsx)(m.Z,{className:"w-5 h-5 text-gray-400"})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(h.Z,{className:"w-5 h-5 text-emerald-500"}),(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"Quest\xf5es"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==S?void 0:S.questoes_respondidas)||0})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(u.Z,{className:"w-5 h-5 text-blue-500"}),(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"Taxa"})]}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[Q,"%"]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(b.Z,{className:"w-5 h-5 text-amber-500"}),(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"Batalhas"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==S?void 0:S.batalhas_jogadas)||0})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-4 border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)(j.Z,{className:"w-5 h-5 text-purple-500"}),(0,t.jsx)("span",{className:"text-gray-500 text-sm",children:"Perfeitas"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null==S?void 0:S.batalhas_perfeitas)||0})]})]}),C?(0,t.jsx)("div",{className:"bg-white rounded-2xl p-5 border border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-violet-100 rounded-xl flex items-center justify-center",children:(0,t.jsx)(p.Z,{className:"w-6 h-6 text-violet-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-bold text-gray-900",children:["Diagn\xf3stico: ",C.nivel]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["Nota TRI: ",C.nota_tri," • ",C.percentual_geral,"% acertos"]})]})]}),(0,t.jsx)(n(),{href:"/diagnostico",className:"text-violet-600 hover:text-violet-700",children:(0,t.jsx)(m.Z,{className:"w-6 h-6"})})]})}):(0,t.jsx)(n(),{href:"/diagnostico",className:"block bg-gradient-to-r from-violet-500 to-purple-500 rounded-2xl p-5 text-white hover:from-violet-600 hover:to-purple-600 transition-all",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,t.jsx)(p.Z,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold",children:"Fa\xe7a seu Diagn\xf3stico"}),(0,t.jsx)("p",{className:"text-white/80 text-sm",children:"Descubra seu n\xedvel em matem\xe1tica"})]})]}),(0,t.jsx)(m.Z,{className:"w-6 h-6"})]})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Estudar"}),(0,t.jsx)(n(),{href:"/ranking",className:"block bg-gradient-to-r from-yellow-500 to-amber-500 rounded-2xl p-5 text-white hover:from-yellow-600 hover:to-amber-600 transition-all",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,t.jsx)(o.Z,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold",children:"Ranking"}),(0,t.jsx)("p",{className:"text-white/80 text-sm",children:"Veja sua posi\xe7\xe3o"})]})]}),(0,t.jsx)(m.Z,{className:"w-6 h-6"})]})}),(0,t.jsx)(n(),{href:"/batalha",className:"block bg-gradient-to-r from-amber-500 to-orange-500 rounded-2xl p-5 text-white hover:from-amber-600 hover:to-orange-600 transition-all",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:(0,t.jsx)(b.Z,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold",children:"Batalha R\xe1pida"}),(0,t.jsx)("p",{className:"text-white/80 text-sm",children:"5 quest\xf5es • 30s cada • +150 XP"})]})]}),(0,t.jsx)(m.Z,{className:"w-6 h-6"})]})}),(0,t.jsx)(n(),{href:"/caderno-erros",className:"block bg-white rounded-2xl p-5 border border-gray-100 hover:border-red-200 hover:bg-red-50/50 transition-all",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center",children:(0,t.jsx)(g.Z,{className:"w-6 h-6 text-red-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-gray-900",children:"Caderno de Erros"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:M>0?"".concat(M," quest\xf5es para revisar"):"Nenhum erro pendente"})]})]}),M>0&&(0,t.jsx)("span",{className:"bg-red-500 text-white text-sm font-bold px-3 py-1 rounded-full",children:M})]})}),(0,t.jsx)(n(),{href:"/plataforma/enem",className:"block bg-white rounded-2xl p-5 border border-gray-100 hover:border-blue-200 hover:bg-blue-50/50 transition-all",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,t.jsx)(f.Z,{className:"w-6 h-6 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-bold text-gray-900",children:"M\xf3dulos ENEM"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Estude por t\xf3picos"})]})]}),(0,t.jsx)(m.Z,{className:"w-6 h-6 text-gray-400"})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-5 border border-gray-100",children:[(0,t.jsxs)("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,t.jsx)(N.Z,{className:"w-5 h-5 text-amber-500"}),"N\xedveis e T\xedtulos"]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-2",children:v.Ae.map(e=>(0,t.jsxs)("div",{className:"p-3 rounded-xl text-center ".concat(H&&e.nivel===H.nivel?"bg-amber-100 border-2 border-amber-400":H&&e.nivel<H.nivel?"bg-gray-100":"bg-gray-50 opacity-50"),children:[(0,t.jsx)("p",{className:"text-lg font-bold text-gray-900",children:e.nivel}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:e.titulo}),(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:[e.xpNecessario," XP"]})]},e.nivel))})]})]})]})}},5293:function(e,s,a){"use strict";async function t(e,s,a){let t=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{data:l}=await e.from("conquistas").select("*").eq("ativo",!0);if(!l)return[];let{data:r}=await e.from("user_conquistas").select("conquista_id").eq("user_id",s),i=new Set((null==r?void 0:r.map(e=>e.conquista_id))||[]),n=[];for(let r of l){if(i.has(r.id))continue;let l=!1;switch(r.criterio_tipo){case"questoes_respondidas":l=a.questoes_respondidas>=r.criterio_valor;break;case"questoes_corretas":l=a.questoes_corretas>=r.criterio_valor;break;case"batalhas_jogadas":l=a.batalhas_jogadas>=r.criterio_valor;break;case"batalhas_perfeitas":l=a.batalhas_perfeitas>=r.criterio_valor;break;case"streak_atual":l=a.streak_atual>=r.criterio_valor;break;case"xp_total":l=a.xp_total>=r.criterio_valor;break;case"nivel":l=a.nivel>=r.criterio_valor;break;case"diagnostico_completo":l=t}if(l&&(n.push(r),await e.from("user_conquistas").insert({user_id:s,conquista_id:r.id}),r.xp_bonus>0)){let{data:a}=await e.from("user_stats").select("xp_total").eq("user_id",s).single();a&&await e.from("user_stats").update({xp_total:a.xp_total+r.xp_bonus,updated_at:new Date().toISOString()}).eq("user_id",s)}}return n}async function l(e,s){let{data:a}=await e.from("conquistas").select("*").eq("ativo",!0).order("ordem"),{data:t}=await e.from("user_conquistas").select("conquista_id, desbloqueada_em").eq("user_id",s),l=new Map((null==t?void 0:t.map(e=>[e.conquista_id,e.desbloqueada_em]))||[]);return(a||[]).map(e=>({...e,desbloqueada:l.has(e.id),desbloqueada_em:l.get(e.id)||null}))}a.d(s,{Z:function(){return l},c:function(){return t}})}},function(e){e.O(0,[250,881,778,971,938,744],function(){return e(e.s=9042)}),_N_E=e.O()}]);