(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[507],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var s=r(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),d=(e,t)=>{let r=(0,s.forwardRef)(({color:r="currentColor",size:d=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:o,...x},m)=>(0,s.createElement)("svg",{ref:m,...a,width:d,height:d,stroke:r,strokeWidth:i?24*Number(l)/Number(d):l,className:["lucide",`lucide-${n(e)}`,c].join(" "),...x},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(o)?o:[o]]));return r.displayName=`${e}`,r}},3067:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9865:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},3008:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3523:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},9224:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},7216:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]])},9670:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2104:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},7854:function(e,t,r){Promise.resolve().then(r.bind(r,5377))},5377:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var s=r(7437),a=r(2265),n=r(4033),d=r(1396),l=r.n(d),i=r(3082),c=r(3067),o=r(9865),x=r(2898);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,x.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);var u=r(2104),h=r(3008),p=r(9224),b=r(3523),g=r(7216),f=r(9670);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,x.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function j(){let e=(0,n.useRouter)(),t=(0,i.createClientComponentClient)(),[r,d]=(0,a.useState)([]),[x,j]=(0,a.useState)(!0),[v,N]=(0,a.useState)("pendentes"),[w,k]=(0,a.useState)(null),[Z,C]=(0,a.useState)(null);async function _(){let{data:{user:r}}=await t.auth.getUser();if(!r){e.push("/login");return}let{data:s,error:a}=await t.from("caderno_erros").select("id, questao_id, resposta_usuario, revisado, created_at").eq("user_id",r.id).order("created_at",{ascending:!1});if(a){console.error("Erro ao buscar erros:",a),j(!1);return}if(!s||0===s.length){d([]),j(!1);return}let n=s.map(e=>e.questao_id),{data:l}=await t.from("questoes").select("*").in("id",n);d(s.map(e=>({...e,questao:null==l?void 0:l.find(t=>t.id===e.questao_id)})).filter(e=>e.questao)),j(!1)}(0,a.useEffect)(()=>{_()},[]);let q=async(e,r)=>{await t.from("caderno_erros").update({revisado:!r,updated_at:new Date().toISOString()}).eq("id",e),d(t=>t.map(t=>t.id===e?{...t,revisado:!r}:t))},M=async e=>{await t.from("caderno_erros").delete().eq("id",e),d(t=>t.filter(t=>t.id!==e))},E=r.filter(e=>"pendentes"===v?!e.revisado:"revisados"!==v||e.revisado),z=r.filter(e=>!e.revisado).length,S=r.filter(e=>e.revisado).length,A=e=>{switch(e){case"facil":return"bg-emerald-100 text-emerald-700";case"dificil":return"bg-red-100 text-red-700";default:return"bg-amber-100 text-amber-700"}},D=e=>{switch(e){case"facil":return"F\xe1cil";case"dificil":return"Dif\xedcil";default:return"M\xe9dio"}};return x?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(l(),{href:"/dashboard",className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[(0,s.jsx)(c.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Voltar"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.Z,{className:"w-5 h-5 text-red-500"}),(0,s.jsx)("h1",{className:"font-bold text-gray-900",children:"Caderno de Erros"})]}),(0,s.jsx)("div",{className:"w-20"})]})})}),(0,s.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4 text-center",children:[(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:r.length}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Total"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4 text-center",children:[(0,s.jsx)("p",{className:"text-3xl font-bold text-red-600",children:z}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Pendentes"})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4 text-center",children:[(0,s.jsx)("p",{className:"text-3xl font-bold text-emerald-600",children:S}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Revisados"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,s.jsx)(m,{className:"w-5 h-5 text-gray-400"}),(0,s.jsxs)("button",{onClick:()=>N("pendentes"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("pendentes"===v?"bg-red-500 text-white":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"),children:["Pendentes (",z,")"]}),(0,s.jsxs)("button",{onClick:()=>N("revisados"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("revisados"===v?"bg-emerald-500 text-white":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"),children:["Revisados (",S,")"]}),(0,s.jsxs)("button",{onClick:()=>N("todos"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat("todos"===v?"bg-blue-500 text-white":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"),children:["Todos (",r.length,")"]})]}),0===E.length?(0,s.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-200 p-8 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(u.Z,{className:"w-8 h-8 text-gray-400"})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Nenhum erro pendente!"}),(0,s.jsx)("p",{className:"text-gray-500 mb-6",children:"Voc\xea revisou todos os erros. Continue estudando!"}),(0,s.jsx)(l(),{href:"/dashboard",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-500 text-white rounded-xl font-medium hover:bg-blue-600",children:"Continuar Estudando"})]}):(0,s.jsx)("div",{className:"space-y-4",children:E.map(e=>{let t=w===e.id,r=Z===e.id,a=e.questao;return a?(0,s.jsxs)("div",{className:"bg-white rounded-xl border-2 overflow-hidden transition-all ".concat(e.revisado?"border-emerald-200":"border-red-200"),children:[(0,s.jsxs)("button",{onClick:()=>k(t?null:e.id),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center ".concat(e.revisado?"bg-emerald-100":"bg-red-100"),children:e.revisado?(0,s.jsx)(h.Z,{className:"w-5 h-5 text-emerald-600"}):(0,s.jsx)(u.Z,{className:"w-5 h-5 text-red-600"})}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("p",{className:"font-medium text-gray-900",children:["Quest\xe3o ",a.numero]}),(0,s.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat(A(a.dificuldade)),children:D(a.dificuldade)})]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Sua: ",(0,s.jsx)("span",{className:"text-red-600 font-medium",children:e.resposta_usuario})," | Correta: ",(0,s.jsx)("span",{className:"text-emerald-600 font-medium",children:a.resposta_correta})]})]})]}),t?(0,s.jsx)(p.Z,{className:"w-5 h-5 text-gray-400"}):(0,s.jsx)(b.Z,{className:"w-5 h-5 text-gray-400"})]}),t&&(0,s.jsxs)("div",{className:"p-4 border-t border-gray-100 bg-gray-50",children:[(0,s.jsx)("p",{className:"text-gray-700 mb-4 whitespace-pre-line",children:a.enunciado}),(0,s.jsx)("div",{className:"space-y-2 mb-4",children:["A","B","C","D","E"].map(t=>{let r=a["alternativa_".concat(t.toLowerCase())];if(!r)return null;let n=t===a.resposta_correta,d=t===e.resposta_usuario&&!n;return(0,s.jsxs)("div",{className:"p-3 rounded-xl border ".concat(n?"bg-emerald-50 border-emerald-300":d?"bg-red-50 border-red-300":"bg-white border-gray-200"),children:[(0,s.jsxs)("span",{className:"font-bold mr-2 ".concat(n?"text-emerald-700":d?"text-red-700":"text-gray-700"),children:[t,")"]}),(0,s.jsx)("span",{className:n?"text-emerald-700":d?"text-red-700":"text-gray-700",children:r}),n&&(0,s.jsx)("span",{className:"ml-2 text-emerald-600 font-medium",children:"✓ Correta"}),d&&(0,s.jsx)("span",{className:"ml-2 text-red-600 font-medium",children:"✗ Sua resposta"})]},t)})}),a.explicacao&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("button",{onClick:()=>C(r?null:e.id),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 font-medium",children:[r?(0,s.jsx)(g.Z,{className:"w-5 h-5"}):(0,s.jsx)(f.Z,{className:"w-5 h-5"}),r?"Ocultar resolu\xe7\xe3o":"Ver resolu\xe7\xe3o"]}),r&&(0,s.jsxs)("div",{className:"mt-3 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:[(0,s.jsx)("p",{className:"font-medium text-blue-800 mb-2",children:"\uD83D\uDCA1 Resolu\xe7\xe3o:"}),(0,s.jsx)("p",{className:"text-blue-700 whitespace-pre-line",children:a.explicacao})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 pt-3 border-t border-gray-200",children:[(0,s.jsxs)("button",{onClick:()=>q(e.id,e.revisado),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(e.revisado?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-emerald-100 text-emerald-700 hover:bg-emerald-200"),children:[(0,s.jsx)(h.Z,{className:"w-4 h-4"}),e.revisado?"Marcar como pendente":"Marcar como revisado"]}),(0,s.jsxs)("button",{onClick:()=>M(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium bg-red-100 text-red-700 hover:bg-red-200",children:[(0,s.jsx)(y,{className:"w-4 h-4"}),"Remover"]})]})]})]},e.id):null})})]})]})}},1396:function(e,t,r){e.exports=r(5250)},4033:function(e,t,r){e.exports=r(5313)}},function(e){e.O(0,[250,881,971,938,744],function(){return e(e.s=7854)}),_N_E=e.O()}]);